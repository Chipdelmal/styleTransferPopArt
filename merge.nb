(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[         0,          0]
NotebookDataLength[     24333,        583]
NotebookOptionsPosition[     22082,        526]
NotebookOutlinePosition[     22454,        543]
CellTagsIndexPosition[     22411,        540]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Merge", "Chapter",
 CellChangeTimes->{{3.762993841767693*^9, 3.7629938440386057`*^9}, {
  3.763427113025326*^9, 
  3.763427113758909*^9}},ExpressionUUID->"a44205c7-770d-4e77-a9fa-\
e43ae49c085f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{
    "imagesSize", ",", "styleWeight", ",", "goal", ",", "overlayWeight", ",", 
     "sharpen"}], "}"}], "=", 
   RowBox[{"{", 
    RowBox[{
    "1500", ",", ".8", ",", "\"\<Quality\>\"", ",", ".3", ",", ".75"}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"input", "=", 
   RowBox[{"Import", "[", "\"\<./in.jpg\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imgOriginal", "=", 
   RowBox[{"ImageResize", "[", 
    RowBox[{
     RowBox[{"input", "//", "ImageAdjust"}], ",", 
     RowBox[{"imagesSize", "+", "20"}]}], "]"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.764249868295207*^9, 3.764249875559022*^9}, {
   3.764249950211838*^9, 3.764249961796465*^9}, {3.7642500274962053`*^9, 
   3.764250053421372*^9}, {3.764250469037695*^9, 3.764250473747355*^9}, {
   3.7642640559136887`*^9, 3.7642640563157253`*^9}, {3.76433053076472*^9, 
   3.7643305350343513`*^9}, {3.764376073015608*^9, 3.764376074388245*^9}, 
   3.7643761391772413`*^9, {3.764376321247879*^9, 3.764376324649314*^9}},
 CellLabel->
  "In[442]:=",ExpressionUUID->"705da8a5-3ef8-4b30-806d-0ebab6da0c05"],

Cell[CellGroupData[{

Cell["Slices", "Subchapter",
 CellChangeTimes->{{3.763427115587242*^9, 
  3.763427118278963*^9}},ExpressionUUID->"001ee2f0-6760-40fc-8124-\
8674d5496ce8"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"filenames", "=", 
   RowBox[{"FileNames", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"\"\<pop*.jpg\>\"", ",", "\"\<pop*.png\>\""}], "}"}], ",", 
     "\"\<./finals/\>\""}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imgs", "=", 
   RowBox[{"RandomSample", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"ImageResize", "[", 
       RowBox[{
        RowBox[{"Import", "[", "#", "]"}], ",", "imagesSize"}], "]"}], "&"}], 
     "/@", "filenames"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"width", ",", "height"}], "}"}], "=", 
   RowBox[{"ImageDimensions", "[", "imgOriginal", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"{", 
   RowBox[{"deltaV", ",", "deltaH"}], "}"}], "=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Round", "[", 
     RowBox[{"width", "/", 
      RowBox[{"Length", "[", "imgs", "]"}]}], "]"}], ",", 
    RowBox[{"Round", "[", 
     RowBox[{"height", "/", 
      RowBox[{"Length", "[", "imgs", "]"}]}], "]"}]}], "}"}]}]}], "Input",
 CellChangeTimes->{{3.7629081552961683`*^9, 3.762908225243742*^9}, {
  3.762908308924316*^9, 3.762908325967078*^9}, {3.762908358909791*^9, 
  3.762908383074847*^9}, {3.762956710347661*^9, 3.76295672373632*^9}, {
  3.7629926664223537`*^9, 3.762992670539652*^9}, {3.762993416984626*^9, 
  3.762993428608871*^9}, {3.763047204012422*^9, 3.7630472044014807`*^9}, {
  3.763151912085042*^9, 3.7631519126249228`*^9}, {3.763293192413623*^9, 
  3.763293193634185*^9}, {3.763427179469438*^9, 3.7634272153428793`*^9}, {
  3.763427265075844*^9, 3.763427274476906*^9}, {3.763428297103175*^9, 
  3.763428306514575*^9}, {3.764249917272303*^9, 3.76424991791961*^9}, {
  3.764249984476697*^9, 3.7642499871839027`*^9}},
 CellLabel->
  "In[446]:=",ExpressionUUID->"0f6c6c29-0c3a-41d9-bb83-8aa4504e6bb8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"117", ",", "70"}], "}"}]], "Output",
 CellChangeTimes->{
  3.762908383678466*^9, 3.7629095506496983`*^9, 3.762956754986189*^9, {
   3.762992644780596*^9, 3.762992672443612*^9}, 3.76299273865456*^9, {
   3.762993095572835*^9, 3.762993145141905*^9}, {3.762993430632846*^9, 
   3.762993442175695*^9}, {3.763047161280257*^9, 3.763047171789483*^9}, {
   3.763047206003992*^9, 3.763047207481085*^9}, {3.763048812013206*^9, 
   3.7630488647102222`*^9}, 3.763050127134102*^9, 3.763142714472962*^9, 
   3.763142797674816*^9, {3.763151902844249*^9, 3.763151939521681*^9}, 
   3.7631520871976223`*^9, {3.763152148561417*^9, 3.763152169688085*^9}, 
   3.763206386081443*^9, 3.763217166016234*^9, {3.76321729248628*^9, 
   3.763217342674858*^9}, 3.7632209112402363`*^9, {3.763228873283491*^9, 
   3.7632288877650127`*^9}, 3.7632303878170223`*^9, 3.763240691783173*^9, {
   3.763241895514468*^9, 3.763241921475078*^9}, {3.763293179246479*^9, 
   3.7632933018129673`*^9}, {3.76342726759387*^9, 3.7634272806576977`*^9}, 
   3.7634276494356127`*^9, 3.7634281432140617`*^9, {3.764249967712799*^9, 
   3.764249990218233*^9}, {3.764250032944852*^9, 3.764250060749703*^9}, {
   3.764250512416107*^9, 3.764250530856654*^9}, 3.764264071291222*^9, 
   3.764271646320036*^9, {3.7643302439785852`*^9, 3.7643302724822493`*^9}, {
   3.764330392974236*^9, 3.7643304521137667`*^9}, {3.7643305423736887`*^9, 
   3.764330563340022*^9}, {3.764330648402603*^9, 3.764330728910527*^9}, 
   3.764375576133457*^9, {3.764375852893154*^9, 3.764375918322126*^9}, {
   3.764375990417225*^9, 3.7643760176860447`*^9}, {3.7643760517024918`*^9, 
   3.764376144576239*^9}, 3.764376204089527*^9, {3.764376236573369*^9, 
   3.764376261224553*^9}, {3.7643763057423067`*^9, 3.7643763309326773`*^9}},
 CellLabel->
  "Out[449]=",ExpressionUUID->"33973931-d8c6-4556-9cfb-6019f86ac8a0"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Vertical", "Section",
 CellChangeTimes->{{3.763428122742763*^9, 
  3.7634281261362762`*^9}},ExpressionUUID->"bd85a48e-40ed-4f9f-8f84-\
46834c8d81cc"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"slices", "=", 
   RowBox[{"Table", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"probe", "=", 
       RowBox[{"imgs", "[", 
        RowBox[{"[", 
         RowBox[{"i", "+", "1"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"ImageTake", "[", 
       RowBox[{"probe", ",", 
        RowBox[{"{", 
         RowBox[{"0", ",", "height"}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"deltaV", "*", "i"}], ",", 
          RowBox[{
           RowBox[{"deltaV", "*", "i"}], "+", "deltaV"}]}], "}"}]}], "]"}]}], 
     "\[IndentingNewLine]", ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "0", ",", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"imgs", "//", "Length"}], ")"}], "-", "1"}]}], "}"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"merged", "=", 
   RowBox[{
    RowBox[{"ImageCompose", "[", 
     RowBox[{
      RowBox[{"ImageAssemble", "[", "slices", "]"}], ",", 
      RowBox[{"{", 
       RowBox[{"imgOriginal", ",", "overlayWeight"}], "}"}]}], "]"}], "//", 
    RowBox[{
     RowBox[{"Sharpen", "[", 
      RowBox[{"#", ",", "sharpen"}], "]"}], "&"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Export", "[", 
  RowBox[{"\"\<./art/vertical.jpg\>\"", ",", 
   RowBox[{
    RowBox[{"merged", "//", "ImageAdjust"}], "//", 
    RowBox[{
     RowBox[{"Sharpen", "[", 
      RowBox[{"#", ",", "sharpen"}], "]"}], "&"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", "imagesSize"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.7629082422922163`*^9, 3.762908288240287*^9}, 
   3.762908357875166*^9, {3.762908394073101*^9, 3.7629085094638166`*^9}, {
   3.762909450100731*^9, 3.7629094702620163`*^9}, {3.762956733156259*^9, 
   3.762956735472039*^9}, {3.762992728800571*^9, 3.762992729973671*^9}, {
   3.762993109467375*^9, 3.762993150252163*^9}, {3.763220904210539*^9, 
   3.76322090810137*^9}, {3.7632303779061213`*^9, 3.763230382486916*^9}, {
   3.763427157479624*^9, 3.763427162035162*^9}, 3.763427232885335*^9, 
   3.763427276715748*^9, 3.763427416493984*^9, {3.763428311137906*^9, 
   3.76342831620684*^9}, {3.764250089209374*^9, 3.764250098061036*^9}, 
   3.7642504821335382`*^9, 3.764330370633568*^9},
 CellLabel->
  "In[450]:=",ExpressionUUID->"dd80b31c-1fb0-4f17-a9bd-c1f9f5b489ed"],

Cell[BoxData["\<\"./art/vertical.jpg\"\>"], "Output",
 CellChangeTimes->{{3.764250046444503*^9, 3.764250099124799*^9}, {
   3.764250506780806*^9, 3.764250531305669*^9}, 3.76426407171679*^9, 
   3.764271646770976*^9, {3.76433024451786*^9, 3.7643302730315447`*^9}, {
   3.7643303858237467`*^9, 3.7643304526340017`*^9}, {3.764330544014887*^9, 
   3.7643305638875*^9}, {3.764330648981079*^9, 3.764330729459351*^9}, 
   3.7643755766535463`*^9, {3.764375853276245*^9, 3.7643759188271217`*^9}, {
   3.764375990800164*^9, 3.764376018109894*^9}, {3.764376052077249*^9, 
   3.764376144977667*^9}, 3.76437620449652*^9, {3.764376237038731*^9, 
   3.764376261689117*^9}, {3.764376306160761*^9, 3.7643763313859777`*^9}},
 CellLabel->
  "Out[452]=",ExpressionUUID->"3ca5be69-de1e-4e0c-b923-61f664a21bfa"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Horizontal", "Section",
 CellChangeTimes->{{3.763428128789969*^9, 
  3.763428132398919*^9}},ExpressionUUID->"100f123f-2ec3-442d-82ad-\
513d8ad32a40"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"slices", "=", 
   RowBox[{"Table", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"probe", "=", 
       RowBox[{"imgs", "[", 
        RowBox[{"[", 
         RowBox[{"i", "+", "1"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      
      RowBox[{"ImageTake", "[", 
       RowBox[{"probe", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"deltaH", "*", "i"}], ",", 
          RowBox[{
           RowBox[{"deltaH", "*", "i"}], "+", "deltaH"}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{"0", ",", "width"}], "}"}]}], "]"}]}], "\[IndentingNewLine]",
      ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "0", ",", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"imgs", "//", "Length"}], ")"}], "-", "1"}]}], "}"}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"merged", "=", 
   RowBox[{
    RowBox[{"ImageCompose", "[", 
     RowBox[{
      RowBox[{"ImageAssemble", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"{", "#", "}"}], "&"}], "/@", "slices"}], "]"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"ImageResize", "[", 
         RowBox[{"imgOriginal", ",", "imagesSize"}], "]"}], ",", 
        "overlayWeight"}], "}"}]}], "]"}], "//", 
    RowBox[{
     RowBox[{"Sharpen", "[", 
      RowBox[{"#", ",", "sharpen"}], "]"}], "&"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Export", "[", 
  RowBox[{"\"\<./art/horizontal.jpg\>\"", ",", 
   RowBox[{
    RowBox[{"merged", "//", "ImageAdjust"}], "//", 
    RowBox[{
     RowBox[{"Sharpen", "[", 
      RowBox[{"#", ",", "sharpen"}], "]"}], "&"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", "imagesSize"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.7634273831277323`*^9, 3.763427425905837*^9}, {
   3.7634283138912888`*^9, 3.76342831416116*^9}, {3.7642501137877607`*^9, 
   3.76425011663698*^9}, 3.764250274892993*^9, 3.764250487078426*^9, 
   3.764330368704109*^9},
 CellLabel->
  "In[453]:=",ExpressionUUID->"6114c622-5eec-49bc-a045-3bd3224f5d36"],

Cell[BoxData["\<\"./art/horizontal.jpg\"\>"], "Output",
 CellChangeTimes->{
  3.7634274306897907`*^9, 3.763427650070809*^9, 3.763428152105617*^9, 
   3.764250117877675*^9, {3.764250513512217*^9, 3.7642505316216173`*^9}, 
   3.764264072146967*^9, 3.7642716471593924`*^9, {3.7643302448628263`*^9, 
   3.764330273316888*^9}, {3.7643303938397083`*^9, 3.76433045314657*^9}, 
   3.764330564341153*^9, {3.7643306493981256`*^9, 3.764330730028617*^9}, 
   3.764375577073679*^9, {3.764375853614159*^9, 3.764375919216432*^9}, {
   3.764375991201296*^9, 3.764376018707752*^9}, {3.764376052409133*^9, 
   3.764376145387581*^9}, 3.7643762049026012`*^9, {3.7643762373795223`*^9, 
   3.764376262142785*^9}, {3.764376306555287*^9, 3.7643763318256607`*^9}},
 CellLabel->
  "Out[455]=",ExpressionUUID->"4176b9c8-c8cd-44ef-a4ee-ec9c6b4af3d5"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Grid", "Subchapter",
 CellChangeTimes->{{3.7629938352043247`*^9, 
  3.7629938373660717`*^9}},ExpressionUUID->"2b8d9331-b055-4bce-a20e-\
6020f895121e"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"imgsPadded", "=", 
   RowBox[{"Flatten", "[", 
    RowBox[{"{", 
     RowBox[{
     "imgs", ",", "imgs", ",", "imgs", ",", "imgs", ",", "imgs", ",", "imgs", 
      ",", "imgs", ",", "imgs", ",", "imgs", ",", "imgs", ",", "imgs", ",", 
      "imgs"}], "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"perRow", "=", "6"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imgsNormalized", "=", 
   RowBox[{"Partition", "[", 
    RowBox[{
     RowBox[{"imgsPadded", "[", 
      RowBox[{"[", 
       RowBox[{"1", ";;", 
        RowBox[{"(", 
         SuperscriptBox["perRow", "2"], ")"}]}], "]"}], "]"}], ",", 
     "perRow"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"{", 
   RowBox[{"deltaV", ",", "deltaH"}], "}"}], "=", 
  RowBox[{"{", 
   RowBox[{
    RowBox[{"Round", "[", 
     RowBox[{"width", "/", "perRow"}], "]"}], ",", 
    RowBox[{"Round", "[", 
     RowBox[{"height", "/", "perRow"}], "]"}]}], "}"}]}]}], "Input",
 CellChangeTimes->{
  3.762992770703731*^9, {3.7629928724106693`*^9, 3.762992874848282*^9}, {
   3.762992906817116*^9, 3.7629929881505203`*^9}, {3.762993061434936*^9, 
   3.762993093037734*^9}, {3.762993239963757*^9, 3.762993247706608*^9}, {
   3.762993831709598*^9, 3.762993854525901*^9}, {3.762993910765717*^9, 
   3.7629939202370567`*^9}, {3.763206469813936*^9, 3.763206470293281*^9}, {
   3.763206590177202*^9, 3.7632065914738493`*^9}, {3.7632173005945044`*^9, 
   3.7632173007179947`*^9}, {3.763306926561451*^9, 3.763306927399109*^9}, {
   3.764250385634194*^9, 3.764250406530842*^9}, {3.764330349545087*^9, 
   3.764330349864163*^9}, {3.7643762308037653`*^9, 3.764376231536413*^9}, {
   3.764376453164384*^9, 3.764376454174171*^9}},
 CellLabel->
  "In[465]:=",ExpressionUUID->"8d0e46c4-6b98-4a76-8742-a844a7fd9c2e"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"253", ",", "152"}], "}"}]], "Output",
 CellChangeTimes->{
  3.762993920670377*^9, {3.763047162829422*^9, 3.763047174298732*^9}, 
   3.7630472123113327`*^9, {3.7630488163240623`*^9, 3.763048869053873*^9}, 
   3.763050132473359*^9, 3.763142717298118*^9, 3.763142801123239*^9, 
   3.763151941799111*^9, 3.763152089760889*^9, {3.763152134837425*^9, 
   3.763152172112466*^9}, 3.7632063887746363`*^9, 3.763206471977561*^9, 
   3.763206591620129*^9, 3.763217169202094*^9, {3.763217296029488*^9, 
   3.763217345532799*^9}, 3.763220914923229*^9, {3.763228877556645*^9, 
   3.763228892192572*^9}, 3.763230392437298*^9, 3.763240696149064*^9, {
   3.763241899902581*^9, 3.763241925755302*^9}, {3.763306910290741*^9, 
   3.763306960442504*^9}, 3.763324295536745*^9, 3.763391141468453*^9, {
   3.76339117594855*^9, 3.763391203659162*^9}, {3.763407837382509*^9, 
   3.763407856402019*^9}, {3.763407887578286*^9, 3.763407913886018*^9}, 
   3.763407957280716*^9, 3.763408014932249*^9, 3.763408046806263*^9, 
   3.763465500168676*^9, 3.763725009822215*^9, 3.763725079023819*^9, 
   3.763725520690696*^9, 3.763725585094493*^9, 3.763725703824018*^9, 
   3.764250266076071*^9, {3.764250386313218*^9, 3.764250406968218*^9}, {
   3.764250513611669*^9, 3.764250531689213*^9}, 3.764264072186612*^9, 
   3.764271647293111*^9, {3.764330244928451*^9, 3.764330273355624*^9}, 
   3.764330350634507*^9, {3.764330393884149*^9, 3.7643304532096567`*^9}, 
   3.7643305643844013`*^9, {3.764330649451902*^9, 3.7643307301129837`*^9}, 
   3.764375577197983*^9, {3.764375853676539*^9, 3.764375919278997*^9}, {
   3.764375991266514*^9, 3.764376018758202*^9}, {3.764376052464183*^9, 
   3.764376145508203*^9}, 3.7643762049735193`*^9, {3.764376237442993*^9, 
   3.764376262194502*^9}, {3.764376306626989*^9, 3.764376331878704*^9}, 
   3.7643764550763273`*^9},
 CellLabel->
  "Out[468]=",ExpressionUUID->"7b48e262-70f9-4425-aa72-027bdd295ca9"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"slices", "=", 
   RowBox[{"Table", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Table", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"probe", "=", 
         RowBox[{"imgsNormalized", "[", 
          RowBox[{"[", 
           RowBox[{
            RowBox[{"j", "+", "1"}], ",", 
            RowBox[{"i", "+", "1"}]}], "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"take", "=", 
         RowBox[{"ImageTake", "[", 
          RowBox[{"probe", ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"deltaH", "*", "j"}], ",", 
             RowBox[{
              RowBox[{"deltaH", "*", "j"}], "+", "deltaH"}]}], "}"}], ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"deltaV", "*", "i"}], ",", 
             RowBox[{
              RowBox[{"deltaV", "*", "i"}], "+", "deltaV"}]}], "}"}]}], 
          "]"}]}]}], "\[IndentingNewLine]", ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "0", ",", 
         RowBox[{"perRow", "-", "1"}]}], "}"}]}], "]"}], 
     "\[IndentingNewLine]", ",", 
     RowBox[{"{", 
      RowBox[{"j", ",", "0", ",", 
       RowBox[{"perRow", "-", "1"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dims", "=", 
   RowBox[{"ImageDimensions", "[", 
    RowBox[{"slices", "[", 
     RowBox[{"[", 
      RowBox[{"1", ",", "1"}], "]"}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"slicesNorm", "=", 
   RowBox[{"Map", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"ImageResize", "[", 
       RowBox[{"#", ",", "dims"}], "]"}], "&"}], ",", "slices", ",", 
     RowBox[{"{", "2", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"merged", "=", 
   RowBox[{
    RowBox[{"ImageCompose", "[", 
     RowBox[{
      RowBox[{"ImageAssemble", "[", "slicesNorm", "]"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"ImageResize", "[", 
         RowBox[{"imgOriginal", ",", "imagesSize"}], "]"}], ",", 
        "overlayWeight"}], "}"}]}], "]"}], "//", 
    RowBox[{
     RowBox[{"Sharpen", "[", 
      RowBox[{"#", ",", "sharpen"}], "]"}], "&"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"Export", "[", 
  RowBox[{"\"\<./art/grid.png\>\"", ",", 
   RowBox[{
    RowBox[{"merged", "//", "ImageAdjust"}], "//", 
    RowBox[{
     RowBox[{"Sharpen", "[", 
      RowBox[{"#", ",", "sharpen"}], "]"}], "&"}]}], ",", 
   RowBox[{"ImageSize", "\[Rule]", "imagesSize"}]}], "]"}]}], "Input",
 CellChangeTimes->{{3.762992842829451*^9, 3.762992848467512*^9}, {
   3.7629931838418083`*^9, 3.762993338612239*^9}, {3.7629934564920893`*^9, 
   3.762993570085621*^9}, {3.762993602699113*^9, 3.762993658483588*^9}, {
   3.762993711204773*^9, 3.7629937130667133`*^9}, {3.7629937851391783`*^9, 
   3.7629938285832577`*^9}, {3.7630488900325336`*^9, 3.763048896608144*^9}, {
   3.763217231444705*^9, 3.7632172870431557`*^9}, {3.7632288842012167`*^9, 
   3.763228884623467*^9}, 3.763229013383963*^9, {3.7632407115961227`*^9, 
   3.763240711892536*^9}, 3.763306905987988*^9, {3.7633243018912373`*^9, 
   3.763324302902918*^9}, 3.763407943794489*^9, {3.763725040750553*^9, 
   3.763725040956037*^9}, 3.763725567856573*^9, 3.7637256514299707`*^9, 
   3.7642503191929293`*^9, 3.7642503507577744`*^9, {3.7642504660099573`*^9, 
   3.764250489998801*^9}, {3.7643303260113077`*^9, 3.7643303383125057`*^9}},
 CellLabel->
  "In[469]:=",ExpressionUUID->"867843bf-eca2-4d52-b849-b89a6237242e"],

Cell[BoxData["\<\"./art/grid.png\"\>"], "Output",
 CellChangeTimes->{
  3.762993658891047*^9, 3.7629937133940973`*^9, {3.762993787764162*^9, 
   3.762993807943959*^9}, {3.7629938826333447`*^9, 3.762993892852059*^9}, 
   3.762993925221198*^9, {3.763047163335206*^9, 3.7630471743802843`*^9}, 
   3.763047212431952*^9, {3.763048816392296*^9, 3.763048897080319*^9}, 
   3.763050133382925*^9, 3.763142732910612*^9, 3.763142801531929*^9, 
   3.763151941985023*^9, 3.763152089838616*^9, {3.763152136635722*^9, 
   3.763152172178981*^9}, 3.7632063890819902`*^9, 3.763206593149254*^9, 
   3.763217169328583*^9, {3.7632172771833076`*^9, 3.763217345607836*^9}, 
   3.7632209150101223`*^9, {3.7632288776626177`*^9, 3.763228892329344*^9}, 
   3.7632290138443604`*^9, 3.763230392521126*^9, {3.763240696608186*^9, 
   3.763240712380821*^9}, {3.7632419003523493`*^9, 3.763241926131555*^9}, {
   3.7633069174457684`*^9, 3.7633069605243063`*^9}, {3.7633242956154203`*^9, 
   3.7633243034408712`*^9}, 3.763391141550562*^9, {3.763391176066893*^9, 
   3.763391203787388*^9}, {3.763407837954555*^9, 3.763407856566608*^9}, {
   3.763407887716529*^9, 3.763407914018235*^9}, 3.763407957423773*^9, 
   3.7634080150312767`*^9, 3.763408046891464*^9, 3.763465500575609*^9, 
   3.76372500991403*^9, 3.763725079114366*^9, 3.763725520789153*^9, 
   3.763725585172333*^9, 3.763725703924212*^9, 3.764250321887529*^9, 
   3.76425035381318*^9, {3.764250388719252*^9, 3.764250408923677*^9}, {
   3.764250492183069*^9, 3.764250533037367*^9}, 3.764264073504653*^9, 
   3.764271648859878*^9, {3.764330246216894*^9, 3.7643302743479633`*^9}, {
   3.764330340172854*^9, 3.764330352665614*^9}, {3.764330395157536*^9, 
   3.7643304544236517`*^9}, 3.764330565948444*^9, {3.764330650809437*^9, 
   3.764330731413653*^9}, 3.76437557830157*^9, {3.764375854683284*^9, 
   3.764375920167243*^9}, {3.764375992136903*^9, 3.764376019787628*^9}, {
   3.7643760534032784`*^9, 3.764376146424385*^9}, 3.764376206010496*^9, {
   3.764376238350768*^9, 3.7643762631169453`*^9}, {3.764376307688732*^9, 
   3.7643763329190598`*^9}, 3.764376459873376*^9},
 CellLabel->
  "Out[473]=",ExpressionUUID->"d4c84e6f-93e0-472a-b09d-095a30e62e26"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
Evaluator->"Local",
WindowSize->{914, 799},
WindowMargins->{{1, Automatic}, {Automatic, 0}},
FrontEndVersion->"11.3 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 5, \
2018)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[422, 15, 201, 4, 69, "Chapter",ExpressionUUID->"a44205c7-770d-4e77-a9fa-e43ae49c085f"],
Cell[626, 21, 1301, 32, 94, "Input",ExpressionUUID->"705da8a5-3ef8-4b30-806d-0ebab6da0c05"],
Cell[CellGroupData[{
Cell[1952, 57, 154, 3, 65, "Subchapter",ExpressionUUID->"001ee2f0-6760-40fc-8124-8674d5496ce8"],
Cell[CellGroupData[{
Cell[2131, 64, 1863, 45, 94, "Input",ExpressionUUID->"0f6c6c29-0c3a-41d9-bb83-8aa4504e6bb8"],
Cell[3997, 111, 1871, 28, 34, "Output",ExpressionUUID->"33973931-d8c6-4556-9cfb-6019f86ac8a0"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5905, 144, 155, 3, 67, "Section",ExpressionUUID->"bd85a48e-40ed-4f9f-8f84-46834c8d81cc"],
Cell[CellGroupData[{
Cell[6085, 151, 2334, 58, 136, "Input",ExpressionUUID->"dd80b31c-1fb0-4f17-a9bd-c1f9f5b489ed"],
Cell[8422, 211, 789, 11, 34, "Output",ExpressionUUID->"3ca5be69-de1e-4e0c-b923-61f664a21bfa"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[9260, 228, 155, 3, 67, "Section",ExpressionUUID->"100f123f-2ec3-442d-82ad-513d8ad32a40"],
Cell[CellGroupData[{
Cell[9440, 235, 2048, 58, 199, "Input",ExpressionUUID->"6114c622-5eec-49bc-a045-3bd3224f5d36"],
Cell[11491, 295, 822, 12, 34, "Output",ExpressionUUID->"4176b9c8-c8cd-44ef-a4ee-ec9c6b4af3d5"]
}, Open  ]]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[12374, 314, 156, 3, 65, "Subchapter",ExpressionUUID->"2b8d9331-b055-4bce-a20e-6020f895121e"],
Cell[CellGroupData[{
Cell[12555, 321, 1823, 42, 96, "Input",ExpressionUUID->"8d0e46c4-6b98-4a76-8742-a844a7fd9c2e"],
Cell[14381, 365, 1940, 30, 34, "Output",ExpressionUUID->"7b48e262-70f9-4425-aa72-027bdd295ca9"]
}, Open  ]],
Cell[CellGroupData[{
Cell[16358, 400, 3507, 88, 262, "Input",ExpressionUUID->"867843bf-eca2-4d52-b849-b89a6237242e"],
Cell[19868, 490, 2174, 31, 92, "Output",ExpressionUUID->"d4c84e6f-93e0-472a-b09d-095a30e62e26"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
}
]
*)

